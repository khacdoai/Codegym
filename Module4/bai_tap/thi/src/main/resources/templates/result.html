<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>List Product</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>
<body>
<div id="wrapper">
    <div class="container">
        <div class="row justify-content-around">
            <nav class="navbar bg-info row-md-8 mt-3 ">
                <div class="container-fluid">
                    <a class="btn btn-outline-primary mx-4" role="button" href="/create" >Đăng kí dự án</a>
                    <form class="d-flex mx-4" role="search" action="">
                        <input class="form-control me-2" type="date" name="startDate" id="start-date-input" th:value="${startDate}">
                        <input class="form-control me-2" type="date" name="endDate" id="end-date-input" th:value="${endDate}" style="margin-left: 50px">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search" name="name" id="search-input" th:value="${search}" style="margin-left: 200px">
                        <button class="btn btn-outline-success mx-3" type="submit">Search</button>
                    </form>

                </div>
            </nav>
            <div class="row-md-8 bg-light p-3">
                <h1 class="text-center text-uppercase py-3">Thống kê dự án</h1>
                <table class="table table-hover text-center bg-light">
                    <thead>
                    <tr>
                        <th>Mã dự án</th>
                        <th>Tên dự Án</th>
                        <th>Tên doanh nghiệp</th>
                        <th>Kinh phí yêu cầu</th>
                        <th>Thời gian đăng kí giới thiệu</th>
                        <th>ngày đăng kí</th>
                        <th>Mô tả</th>
                        <th>Chi phí</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="duAn, loop : ${list}">
                        <td th:text="${duAn.maDuAn}"></td>
                        <td th:text="${duAn.tenDuAn}"></td>
                        <td th:text="${duAn.doanhNghiep.tenDoanhNghiep}"></td>
                        <td th:text="${duAn.kinhPhi}"></td>
                        <td th:text="${duAn.thoiGianDangKi}"></td>
                        <td th:text="${duAn.ngayDangKi}"></td>
                        <td th:text="${duAn.moTa}"></td>
                        <td th:text="${duAn.tinhChiPhi()}"></td>
                        <td>
                            <button type="button" class="btn btn-outline-primary"
                                    th:attr="onclick=|sendInformation('${duAn.maDuAn}','${duAn.tenDuAn}','${duAn.doanhNghiep.tenDoanhNghiep}','${duAn.doanhNghiep.email}',
                                         '${duAn.doanhNghiep.diaChi}','${duAn.doanhNghiep.sdt}','${duAn.ngayDangKi}','${duAn.moTa}','${duAn.tinhChiPhi()}')|"
                                    data-bs-toggle="modal" data-bs-target="#exampleModal">
                                Chi tiết
                            </button>
                        </td>

                    </tr>
                    </tbody>
                </table>
                <div style="text-align: center">
                    <a th:href="@{/(page=${list.number - 1})}" th:if="${list.hasPrevious()}">Trang trước</a>

                    <a th:each="i : ${#numbers.sequence(0, list.totalPages - 1)}" role="button"
                       class="btn btn-outline-primary" th:text="${i+1}"
                       th:href="@{/(page=${i})}"
                    ></a>
                    <a th:href="@{/(page=${list.number + 1})}" th:if="${list.hasNext()}">Trang sau</a>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-7 text-center text-uppercase p-7" id="exampleModalLabel">Chi tiết dự án</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form method="post" action="">
                <div class="modal-body p-5" >
                    <div class="form-group">
                       <p>Mã dự án: <span id="maDuAn"></span></p>
                    </div>
                    <div class="form-group">
                      <p>Tên dự án: <span th:id="tenDuAn"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Tên doanh nghiệp:  <span th:id="tenDoanhNghiep"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Email: <span th:id="email"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Số điện thoại: <span th:id="sdt"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Địa chỉ: <span th:id="diaChi"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Ngày đăng kí: <span th:id="ngayDangKi"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Mô tả: <span th:id="moTa"></span></p>
                    </div>
                    <div class="form-group">
                        <p>Kinh phí: <span th:id="kinhPhi"></span></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">OK</button>
                </div>
            </form>
        </div>
    </div>
</div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>

</div>
</div>
<script>
    function sendInformation(maDuAn,tenDuAn,tenDoanhNghiep,email,diaChi,sdt,ngayDangKi,moTa,kinhPhi) {
        document.getElementById("maDuAn").innerText = maDuAn;
        document.getElementById("tenDuAn").innerText = tenDuAn;
        document.getElementById("tenDoanhNghiep").innerText = tenDoanhNghiep;
        document.getElementById("email").innerText = email;
        document.getElementById("diaChi").innerText = diaChi;
        document.getElementById("sdt").innerText = sdt;
        document.getElementById("ngayDangKi").innerText = ngayDangKi;
        document.getElementById("moTa").innerText = moTa;
        document.getElementById("kinhPhi").innerText = kinhPhi;
    }

</script>
</div>

</body>
</html>